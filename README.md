# Онлайн платформа-торговой сети электроники

Веб-приложение для управления сетью по продаже электроники с иерархической структурой:

* Завод (уровень 0)
* Розничная сеть (уровень 1)
* Индивидуальный предприниматель (уровень 2)

Каждое звено сети имеет поставщика, контактную информацию, продукты и задолженность.

### Технологии

Backend: Python 3.8+, Django 3+, Django REST Framework 3.10+
Database: PostgreSQL 10+
Дополнительно: django-filter для фильтрации API

Установка
1. Клонирование репозитория

git clone git@github.com:kveremyeva/electro-retail.git

2. Создание суперпользователя

```python manage.py loaddata superuser.json```

Логин: admin
Пароль: admin

3. Запуск сервера

```python manage.py runserver```

Сервер будет доступен по адресу: http://localhost:8000
Админ-панель по адресу: http://localhost:8000/admin/

### Функционал админ-панели:

1. CRUD операции для всех моделей
2. Фильтр по городу в списке поставщиков
3. Ссылки на поставщиков - кликабельные ссылки в списке
4. Admin action - "Очистить задолженность перед поставщиком"

### Доступные модели:
* Provider (Поставщик) - звенья сети
* Contact (Контакт) - контактная информация
* Product (Продукт) - товары

## Модели данных

1. **Contact (Контактная информация)**

`email` - Email (уникальный)\
`country` - Страна\
`city` - Город\
`street` - Улица\
`house` - Номер дома

2. **Product (Продукт)**

`name` - Название продукта\
`product_model` - Модель\
`release_date` - Дата выхода на рынок

3. **Provider (Звено сети)**

`name` - Название звена (уникальное)\
`node_type` - Тип звена (0-Завод, 1-Розничная сеть, 2-ИП)\
`contact_info` - Связь с контактной информацией\
`products` - Продукты (ManyToMany)\
`supplier` - Поставщик (ForeignKey на себя)\
`debt_to_supplier` - Задолженность перед поставщиком\
`created_at` - Время создания (автоматически)\
`hierarchy_level` - Уровень иерархии (вычисляется автоматически)

## Функционал

### Автоматическое вычисление иерархии

При сохранении Provider автоматически вычисляется:

`hierarchy_level`: 0 если нет поставщика, иначе уровень поставщика + 1\
`node_type`: определяется по hierarchy_level

### Запрет обновления задолженности через API

Поле `debt_to_supplier` доступно только для чтения в API, может изменяться только через админ-панель.

### Права доступа к API

Доступ к API имеют только активные (`is_active=True`) пользователи.